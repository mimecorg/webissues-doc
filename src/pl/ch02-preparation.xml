<chapter id="webissues.prep">
  <title>Przygotowanie systemu</title>

  <para>Aby korzystać z systemu WebIssues, niezbędne jest skonfigurowanie serwera, który jest jego centralną  i najważniejszą częścią. Niniejszy rozdział opisuje krok po kroku proces instalowania serwera WebIssues i przygotowania go do pracy. Jeśli korzystasz z już istniejącego serwera, możesz pominąć ten rozdział. Informacje na temat aktualizowania systemu do nowej wersji znajdziesz w sekcji <xref linkend="webissues.admin.updating"/>.</para>

  <sect1 id="webissues.prep.requirements">
    <title>Wymagania</title>

    <para>Możesz zainstalować oprogramowanie serwera WebIssues na komputerze z systemem Unix/Linux, OS X lub Windows. Przed przystąpieniem do instalacji potrzebujesz następujących komponentów:</para>

    <itemizedlist>
      <listitem>
        <para>Serwer WWW</para>
      </listitem>
      <listitem>
        <para>Serwer bazy danych</para>
      </listitem>
      <listitem>
        <para>PHP</para>
      </listitem>
    </itemizedlist>

    <para>Możesz użyć serwera Apache, który działa na niemal wszystkich systemach operacyjnych (zalecana jest wersja 2.0 lub nowsza). Możesz również użyć serwera Microsoft IIS, który jest częścią systemu Windows (zalecana jest wersja 7.0 lub nowsza).</para>

    <para>Niezbędny jest jeden z następujących serwerów baz danych:</para>

    <itemizedlist>
      <listitem>
        <para>MySQL (w wersji 5.0.15 lub nowszej)</para>
      </listitem>
      <listitem>
        <para>PostgreSQL (w wersji 8.0 lub nowszej)</para>
      </listitem>
      <listitem>
        <para>Microsoft SQL Server (w wersji 2005 lub nowszej)</para>
      </listitem>
    </itemizedlist>

    <para>Aby zainstalować system, musisz utworzyć bazę danych na jednym z powyższych serwerów oraz konto użytkownika posiadające uprawnienia wystarczające do tworzenia tabel i indeksów w tej bazie danych.</para>

    <para>W przypadku bazy MySQL wymagana jest obsługa silnika InnoDB. Baza danych PostgreSQL powinna być utworzona z kodowaniem znaków w standardzie Unicode. Baza SQL Server może być użyta tylko, jeśli serwer WebIssues jest zainstalowany na komputerze z systemem Windows.</para>

    <para>Serwer WebIssues wymaga również PHP w wersji 5.2.1 lub nowszej, zintegrowanego z serwerem WWW. W przypadku serwera IIS, dla uzyskania najlepszej wydajności zalecane jest użycie modułu <literal>fastcgi</literal> oraz rozszerzenia <literal>wincache</literal>. PHP musi mieć zainstalowane i włączone w pliku <literal>php.ini</literal> rozszerzenie <literal>mbstring</literal>, a jeśli korzystasz z bazy danych MySQL lub PostrgreSQL, również odpowiednio rozszerzenie <literal>mysqli</literal> lub <literal>pgsql</literal>. W przypadku bazy danych SQL Server, począwszy od w wersji 5.3.15 lub 5.4.5 PHP musi być włączone rozszerzenie <literal>com_dotnet</literal>.</para>

    <para>Jeśli instalujesz serwer WebIssues korzystając z zewnętrznej usługi hostingowej, upewnij się, że spełnia ona wszystkie powyższe wymagania. Aby utworzyć bazę danych i skonfigurować serwer WWW, skorzystaj z narzędzi dostarczonych przez dostawcę usług hostingowych i zapoznaj się z dostępną dokumentacją.</para>

    <warning>
      <title>Uwaga</title>
      <para>Niektóre usługi hostingowe mogą mieć specyficzną konfigurację lub inne ograniczenia utrudniające lub nawet uniemożliwiające poprawne zainstalowanie serwera WebIssues. Mogą one na przykład ograniczać ilość dostępnej pamięci, rozmiar bazy danych albo wielkość przesyłanych do serwera plików.</para>
      <para>Instalacja WebIssues na serwerze z włączonym modułem <literal>mod_security</literal> może powodować problemy. W zależności od konfiguracji, może on uniemożliwić dostęp do systemu za pośrednictwem programu Desktop Client lub blokować poprawne żądania zawierające określone słowa. Zalecane jest całkowite wyłączenie modułu <literal>mod_security</literal> lub wyłączenie tych reguł, które powodują problemy. Więcej informacji możesz uzyskać na stronie <ulink url="http://wiki.mimec.org/wiki/WebIssues/Installation"/>.</para>
    </warning>

    <para>Przed zainstalowaniem serwera WebIssues, zainstaluj i skonfiguruj niezbędne komponenty, a następnie utwórz bazę danych, korzystając z odpowiednich narzędzi administracyjnych. Zapoznaj się z dokumentacją tych narzędzi, aby uzyskać więcej informacji na ich temat. Więcej informacji temat tworzenia bazy danych i konfigurowania serwera WWW znajdziesz na stronie <ulink url="http://wiki.mimec.org/wiki/WebIssues/Installation"/>.</para>

  </sect1>

  <sect1 id="webissues.prep.installation">
    <title>Instalacja</title>

    <para>Po upewnieniu się, że wymagane komponenty są zainstalowane i skonfigurowane, oraz utworzeniu bazy danych, możesz przystąpić do właściwej instalacji serwera WebIssues.</para>

    <sect2 id="webissues.prep.installation.files">
      <title>Kopiowanie plików</title>

      <para>Ściągnij i rozpakuj pakiet serwera WebIssues &mdash; zawiera on katalog o nazwie <literal>webissues-x.y</literal> (gdzie <literal>x.y</literal> to wersja pakietu). Następnie przenieś wszystkie pliki i podkatalogi z tego katalogu do katalogu głównego serwera WWW. Jeśli korzystasz z zewnętrznego hostingu, na ogół do kopiowania plików na serwer używa się protokołu FTP, a więc będziesz potrzebował do tego celu klienta FTP.</para>

      <note>
        <title>Notatka</title>
        <para>Istnieje możliwość zainstalowania serwera WebIssues wraz z innymi stronami i aplikacjami WWW działającymi na tym samym komputerze. Możesz zainstalować serwer w podkatalogu umieszczonym w katalogu głównym serwera WWW, a także na wirtualnym hoście lub w wirtualnym katalogu. Zapoznaj się z dokumentacją twojego serwera WWW lub usługi hostingowej, aby uzyskać więcej informacji na ten temat.</para>
        <para>Możesz także utworzyć wiele odrębnych instancji serwera WebIssues w ramach jednej instalacji. Poszczególne instancje mogą być dostępne poprzez różne nazwy domen lub subdomen albo w różnych wirtualnych podkatalogach. Więcej informacji na ten temat znajdziesz na stronie <ulink url="http://wiki.mimec.org/wiki/WebIssues/Configuration"/>.</para>
      </note>

      <para>Następnie nadaj prawo zapisu do podkatalogu <filename>data/sites</filename> użytkownikowi, w kontekście którego działa usługa WWW. Skorzystaj w tym celu z menedżera plików lub klienta FTP albo uruchom polecenie <literal>chmod</literal> z linii poleceń. W katalogu tym, podczas instalacji, zostanie utworzony plik konfiguracyjny. Będą w nim również przechowywane dołączone do spraw załączniki.</para>

      <warning>
        <title>Uwaga</title>
        <para>Upewnij się, że katalogi <filename>data</filename> oraz <filename>common/data</filename> są zabezpieczone przed niepowołanym dostępem przez serwer WWW. W przeciwnym wypadku będzie możliwe pobieranie przechowywanych w systemie załączników bez odpowiedniej autoryzacji. Jeśli korzystasz z serwera Apache, możesz w tym celu wykorzystać załączone w pakiecie pliki <filename>.htaccess</filename>. Więcej informacji na ten temat znajdziesz na stronie <ulink url="http://wiki.mimec.org/wiki/WebIssues/Installation"/>.</para>
        <para>Po zakończeniu instalacji upewnij się również, że plik konfiguracyjny systemu WebIssues jest chroniony przed niepowołanym dostępem, ponieważ zawiera on między innymi login i hasło do bazy danych. Jest to szczególnie istotne w przypadku korzystania z publicznych usług hostingowych.</para>
        <para>Dla zapewnienia największego bezpieczeństwa zaleca się, aby pliki konfiguracyjne i załączniki nie były przechowywane w katalogu <filename>data</filename>, ale w innej lokalizacji położonej poza katalogiem głównym serwera WWW. Więcej informacji na temat zmiany lokalizacji katalogu zawierającego te pliki znajdziesz na stronie <ulink url="http://wiki.mimec.org/wiki/WebIssues/Configuration"/>.</para>
      </warning>

    </sect2>

    <sect2 id="webissues.prep.installation.setup">
      <title>Konfiguracja systemu</title>

      <para>Teraz możesz już otworzyć stronę główną systemu WebIssues. Uruchom swoją ulubioną przeglądarkę internetową i wpisz adres URL serwera, na przykład <literal>http://www.example.com</literal>. Powinieneś zobaczyć następujący komunikat:</para>

      <figure>
        <title>Komunikat powitalny</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig01.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Nie przejmuj się, że komunikat jest po angielsku. Jeśli postąpisz zgodnie z instrukcją i klikniesz odnośnik, zostaniesz zapytany o język, który będzie używany w czasie instalacji. Będzie to również domyślny język, w jakim system WebIssues będzie wyświetlał wszystkie komunikaty.</para>

      <para>W następnym kroku instalacji wyświetlone zostaną podstawowe informacje na temat twojego serwera: nazwa instancji (zwykle będzie to <literal>default</literal>, chyba że tworzysz wiele instancji serwera w ramach jednej instalacji), bazowy adres URL serwera oraz ścieżka katalogu, w którym zostanie utworzony plik konfiguracyjny. Zostanie również wyświetlona wersja PHP, serwera WWW i systemu operacyjnego oraz nazwa komputera, na którym instalujesz system WebIssues. Po zweryfikowaniu tych informacji, przejdź do następnego kroku.</para>

      <figure>
        <title>Konfiguracja połączenia z bazą danych</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig02.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Zostaniesz poproszony o wprowadzenie informacji niezbędnych do połączenia z wcześniej utworzoną bazą danych. Wybierz rodzaj bazy danych, a następnie podaj nazwę hosta serwera bazy danych, jeśli znajduje się on na innym komputerze niż serwer WWW, nazwę bazy danych oraz login i hasło użytkownika posiadającego prawo tworzenia tabel w tej bazie danych. W przypadku bazy SQL Server możesz pozostawić login i hasło puste, aby użyć zintegrowanej autentykacji Windows.</para>

      <para>Pozostaw opcję <guilabel>Zainstaluj nowy serwer</guilabel> zaznaczoną jeśli tworzysz nowy serwer. Jeśli natomiast chesz utworzyć nowy plik konfiguracyjny dla wcześniej utworzonego serwera, wybierz opcję <guilabel>Użyj istniejącego serwera</guilabel>. W tym przypadku strona służąca do wprowadzania parametrów nowego serwera zostanie pominięta, a baza danych nie zostanie w żaden sposób zmodyfikowana, chyba że musi ona być zaktualizowana do nowszej wersji.</para>

      <note>
        <title>Notatka</title>
        <para>Możesz również określić prefiks, który zostanie dodany przed nazwami wszystkich tabel i innych obiektów w bazie danych. Jeśli na przykład wybierzesz prefiks <literal>wi_</literal>, zostaną utworzone tabele o nazwach <literal>wi_server</literal>, <literal>wi_users</literal>, itd.</para>
        <para>Wybierając unikalny prefiks, możesz zainstalować wiele różnych aplikacji korzystających z jednej bazy danych. Możesz również utworzyć kilka oddzielnych instancji serwera WebIssues w ramach jednej bazy danych.</para>
      </note>

      <para>Podaj niezbędne informacje i przejdź do następnego kroku. System WebIssues spróbuje połączyć się z serwerem bazy danych, a w przypadku błędu wyświetli odpowiedni komunikat. Jeśli połączenie się powiedzie, zostanie wyświetlona następująca strona:</para>

      <figure>
        <title>Parametry nowego serwera</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig03.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Podaj nazwę serwera, która będzie widoczna dla wszystkich użytkowników w pasku tytułowym. Wprowadź również hasło dla konta administratora, którego będziesz mógł później użyć, aby zalogować się do serwera i zmieniać jego ustawienia.</para>

      <para>Domyślnie instalator utworzy kilka predefiniowanych typów spraw i widoków. Najlepiej pozostaw to ustawienie, aby szybko rozpocząć pracę z systemem. Będziesz miał później możliwość swobodnego dostosowania, a nawet usunięcia tych wbudowanych typów. Jeśli jednak chcesz samodzielnie utworzyć wszystkie typy spraw od podstaw, wybierz opcję <guilabel>Nie instaluj żadnych typów spraw</guilabel>.</para>

      <para>Przejdź do kolejnej strony, która zawiera krótkie podsumowanie czynności, które zostaną wykonane. Kliknij przycisk <guibutton>Instaluj</guibutton>, aby rozpocząć instalację. Może to potrwać jakiś czas. Jeśli instalacja zakończy się sukcesem, zostanie wyświetlony odpowiedni komunikat.</para>

      <tip>
        <title>Wskazówka</title>
        <para>Aby w przyszłości utworzyć nowy plik konfiguracyjny, na przykład po przeniesieniu bazy danych na inny serwer, po prostu skasuj istniejący plik konfiguracyjny. Zostaniesz wtedy poproszony o uruchomienie instalatora, który utworzy nowy plik konfiguracyjny z odpowiednimi parametrami.</para>
      </tip>

    </sect2>

  </sect1>

  <sect1 id="webissues.prep.setup">
    <title>Konfiguracja początkowa</title>

    <para>Po zainstalowaniu nowego serwera WebIssues, zawiera on początkową konfigurację i ustawienia, ale zanim będzie można z niego korzystać, musisz wykonać jeszcze kilka kroków. Po pierwsze, musisz utworzyć konta użytkowników, którzy będą używać systemu. Po drugie, musisz utworzyć projekty i foldery, w których będą przechowywane sprawy.</para>

    <sect2 id="webissues.prep.setup.users">
      <title>Konta użytkowników</title>

      <para>Zacznijmy od stworzenia kont użytkowników. Kliknij odnośnik <guilabel>Panel administracyjny</guilabel> w prawym górnym rogu okna, a następnie wybierz opcję <guilabel>Konta użytkowników</guilabel>. Powinieneś zobaczyć jednego użytkownika o nazwie Administrator, którego utworzył instalator.</para>

      <para>Utwórz swoje osobiste konto, żebyś nie musiał się logować jako administrator. W tym celu kliknij <guilabel>Dodaj użytkownika</guilabel>, a następnie podaj swoje imię i nazwisko oraz login i hasło, których będziesz używał do logowania się do systemu. Następnie naciśnij <guibutton>OK</guibutton>.</para>

      <figure>
        <title>Tworzenie konta użytkownika</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig04.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Powtórz powyższe kroki, tworząc konta dla pozostałych osób, które będą korzystać z systemu. Dla każdego z nich musisz podać początkowe hasło, ale dla większego bezpieczeństwa możesz zaznaczyć opcję <guilabel>Użytkownik musi zmienić hasło przy następnym logowaniu</guilabel>, jeśli chcesz, aby każdy ustawił swoje własne hasło w momencie logowania do systemu.</para>

      <para>W systemie WebIssues może istnieć więcej użytkowników o uprawnieniach administratora. Aby zmienić uprawnienia użytkownika, wybierz go klikając jego nazwę na liście, a następnie kliknij <guilabel>Zmień dostęp</guilabel>. Możesz wybrać prawo administratora systemu lub zwykłego użytkownika, a także wyłączyć dostęp do systemu dla danego użytkownika. Naciśnij <guibutton>OK</guibutton>, aby zatwierdzić zmiany.</para>

      <tip>
        <title>Wskazówka</title>
        <para>Administrator systemu ma dostęp do Panelu administracyjnego, a także jest administratorem wszystkich istniejących w systemie projektów, nawet jeśli nie jest ich członkiem. Nadawaj więc to uprawnienie tylko zaufanym osobom.</para>
      </tip>

      <para>Skonfigurowana lista kont użytkowników może wyglądać jak na poniższym rysunku:</para>

      <figure>
        <title>Lista kont użytkowników</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig05.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Aby znaleźć więcej informacji na temat administrowania kontami użytkowników, przeczytaj sekcję <xref linkend="webissues.admin.users"/>.</para>

    </sect2>

    <sect2 id="webissues.prep.setup.projects">
      <title>Projekty i foldery</title>

      <para>Kliknij odnośnik <guilabel>Klient WWW</guilabel> w prawym górnym rogu okna, aby przejść do głównej części systemu WebIssues. Po lewej stronie zobaczysz puste drzewo projektów i folderów. Kliknij <guilabel>Zarządzaj projektami</guilabel>, a następnie użyj polecenia <guilabel>Dodaj projekt</guilabel>, aby utworzyć pierwszy projekt. Nadaj mu nazwę <quote>Mój pierwszy projekt</quote> i naciśnij <guibutton>OK</guibutton>.</para>

      <figure>
        <title>Tworzenie projektu</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig06.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Nowy projekt pojawi się w drzewie. Kliknij na tym projekcie, aby go zaznaczyć, a w pasku narzędzi pojawi się szereg operacji, które możesz na nim wykonać. Zacznijmy od utworzenia folderów. Kliknij <guilabel>Dodaj folder</guilabel> i utwórz folder o nazwie <quote>Błędy</quote>, wybierając typ spraw o tej samej nazwie.</para>

      <figure>
        <title>Tworzenie folderu</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig07.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Po utworzeniu folderu, zostanie on wyświetlony w drzewie poniżej projektu. Wybierz ponownie projekt i dodaj kolejny folder typu Zadania. Następnie powtórz tą samą czynność, aby utworzyć folder typu Forum. Drzewo projektów będzie wyglądać następująco:</para>

      <figure>
        <title>Drzewo projektów</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig08.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Na razie nowo utworzony projekt jest dostępny tylko dla administratorów systemu. Aby udzielić dostępu do niego pozostałym użytkownikom, wybierz projekt i kliknij <guilabel>Członkowie projektu</guilabel>. Zostanie wyświetlona pusta lista. Teraz kliknij <guilabel>Dodaj członków</guilabel>, a następnie wybierz wszystkich użytkowników oprócz konta o nazwie Administrator. Kliknij <guibutton>OK</guibutton>.</para>

      <para>Możesz również nadać wybranym członkom prawo administratora projektu. Wybierz użytkownika i kliknij <guilabel>Zmień dostęp</guilabel>, a następnie wybierz poziom uprawnień w podobny sposób, jak w przypadku zmiany dostępu użytkownika do systemu.</para>

      <tip>
        <title>Wskazówka</title>
        <para>Administrator projektu może tworzyć i modyfikować foldery, zmieniać opis projektu, a także nadawać i odbierać uprawnienia innym użytkownikom w ramach tego projektu. Może również usuwać sprawy, a także usuwać i modyfikować komentarze innych użytkowników.</para>
      </tip>

      <para>Skonfigurowana lista członków projektu może wyglądać tak jak poniżej:</para>

      <figure>
        <title>Lista członków projektu</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig09.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Kliknij <guibutton>OK</guibutton>, aby wrócić do głównego okna programu. Projekt wraz z folderami pojawi się w drzewie po lewej stronie okna. Również globalne listy spraw dla każdego z typów pojawią się w drzewie.</para>

      <tip>
        <title>Wskazówka</title>
        <para>Jeśli używasz programu Desktop Client, polecenia służące do zarządzania projektami i folderami są dostępne bezpośrednio w głównym oknie programu. Uaktywnij drzewo projektów, klikając na nim, aby uzyskać do nich dostęp (pod warunkiem, że masz odpowiednie uprawnienia).</para>
      </tip>

      <para>Przeczytaj sekcję <xref linkend="webissues.admin.projects"/> w dalszej części tego podręcznika, aby dowiedzieć się więcej na temat administrowania projektami i folderami.</para>

    </sect2>

  </sect1>

  <sect1 id="webissues.prep.notifications">
    <title>Wysyłanie e-maili</title>

    <para>System WebIssues ma możliwość wysyłania e-maili związanych z alertami bądź subskrypcjami. Jest to opcjonalne, ponieważ nie zawsze pozwala na to konfiguracja komputera lub usługi hostingowej i nie w każdym przypadku jest to potrzebne. Jeśli chcesz używać powiadomień mailowych dla alertów, albo innych funkcji wymagających wysyłania e-maili, musisz wykonać dwa dodatkowe kroki konfiguracyjne.</para>

    <sect2 id="webissues.prep.nofitications.email">
      <title>Ustawienia e-maili</title>

      <para>Najpierw przejdź do Panelu administracyjnego i kliknij <guilabel>Ustawienia e-maili</guilabel>, aby skonfigurować wysyłanie poczty.</para>

      <figure>
        <title>Ustawienia e-maili</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig10.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Jeśli PHP na twoim serwerze jest tak skonfigurowane, że ma możliwość wysyłania e-maili poprzez program <literal>sendmail</literal> lub lokalny serwer SMTP, wybierz opcję <guilabel>Standardowy mailer PHP</guilabel> i wpisz adres, z którego będą wysyłane wiadomości.</para>

      <note>
        <title>Notatka</title>
        <para>Więcej informacji na temat konfigurowania standardowego mechanizmu wysyłania e-maili wbudowanego w PHP znajdziesz na stronie <ulink url="http://php.net/manual/en/mail.configuration.php"/>.</para>
      </note>

      <para>Istnieje również możliwość wysyłania e-maili za pośrednictwem zewnętrznego serwera SMTP. Możesz w tym celu wykorzystać serwer pocztowy twojej firmy lub organizacji albo dowolną publiczną usługę pocztową (np. gmail). Wybierz opcję <guilabel>Własny serwer SMTP</guilabel> i wpisz adres nadawcy wiadomości. Następnie w ramce <guilabel>Serwer SMTP</guilabel> wpisz adres serwera i numer portu usługi pocztowej (zwykle 25 lub 465 dla połączeń szyfrowanych). Wybierz tryb szyfrowania, jeśli serwer SMTP obsługuje szyfrowanie komunikacji. Podaj także nazwę użytkownika i hasło dostępu do serwera SMTP.</para>

      <para>Kliknij <guibutton>Testuj połączenie</guibutton> aby sprawdzić, czy konfiguracja SMTP jest poprawna. System WebIssues wyśle testową wiadomość na swój własny adres. Jeśli ją otrzymasz, oznacza to, że konfiguracja jest poprawna. Nie zapomnij również zapisać konfigurację klikając <guibutton>OK</guibutton>.</para>

      <para>Ponieważ e-maile są wysyłane w formacie HTML, możliwe jest umieszczenie w nich odnośników do folderu, którego dotyczy powiadomienie, a także do poszczególnych spraw. Aby włączyć odnośniki, musisz wpisać bazowy adres URL, pod jakim zainstalowany jest serwer WebIssues. Adres powinien zawierać protokół oraz końcowy znak <quote>/</quote>, na przykład <literal>http://www.example.com/</literal>. Kliknij <guibutton>Wykryj</guibutton>, aby automatycznie wprowadzić adres bieżącej strony. Pamiętaj, że adres powinien zawierać pełną, jednoznaczną nazwę domenową serwera, aby był on dostępny dla wszystkich użytkowników. Jeśli adres URL będzie pozostawiony pusty, e-maile będą wysyłane bez odnośników.</para>

      <figure>
        <title>Odnośniki</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig10-01.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

    </sect2>

    <sect2 id="webissues.prep.nofitications.cron">
      <title>Zadania cykliczne</title>

      <para>Drugim krokiem jest skonfigurowanie cyklicznego zadania, które będzie wysyłać powiadomienia. Zadanie to powinno być wykonywane przynajmniej raz na godzinę, ale żeby szybciej otrzymywać powiadomienia natychmiastowe, zaleca się, żeby zadanie to było wykonywane w odstępach od 5 do 15 minut.</para>

      <para>W przypadku systemów Unix/Linux możesz wykorzystać mechanizm zadań <literal>cron</literal>. Aby dodać zadanie, zmodyfikuj plik <filename>/etc/crontab</filename> lub użyj graficznego narzędzia do zarządzania zadaniami. Jeśli używasz systemu Windows, otwórz Harmonogram zadań i utwórz nowe zadanie. Więcej informacji znajdziesz na stronie <ulink url="http://wiki.mimec.org/wiki/WebIssues/Installation"/>.</para>

      <note>
        <title>Notatka</title>
        <para>Niektóre usługi hostingowe udostępniają możliwość definiowania zadań cyklicznych poprzez dostęp do powłoki lub przez panel administracyjny. Zapoznaj się z dokumentacją usługi, aby uzyskać więcej informacji na ten temat.</para>
        <para>Jeśli twoja usługa hostingowa nie oferuje możliwości uruchamiania zadań cyklicznych, możesz zainstalować takie zadanie na innym komputerze. Możesz na przykład skorzystać z jednej z dostępnych usług <quote>cron online</quote> &mdash; niektóre z nich są dostępne za darmo.</para>
      </note>

      <para>Jeśli zadanie cyklicznie jest wykonywane lokalnie, powinno ono uruchamiać skrypt <literal>cron/job.php</literal> przy użyciu interpretera PHP. Więcej informacji na temat uruchamiania PHP z wiersza poleceń znajdziesz na stronie <ulink url="http://www.php.net/manual/en/features.commandline.options.php"/>.</para>

      <para>Jeśli korzystasz z zewnętrznej usługi cron lub uruchamiasz zadanie na innym komputerze, skrypt powinien być uruchamiany zdalnie, poprzez pełny adres URL, na przykład <literal>http://www.example.com/cron/job.php</literal>. Możesz w tym celu na przykład skorzystać z programu <literal>wget</literal> lub <literal>curl</literal>.</para>

      <para>Aby sprawdzić, czy cykliczne zadanie się uruchamia, przejdź do Panelu administracyjnego i kliknij <guilabel>Ogólne informacje</guilabel>. W ramce <guilabel>Konfiguracja serwera</guilabel> jest wyświetlany czas, jaki upłynął od ostatniego uruchomienia zadania. Każde uruchomienie zadania jest także zalogowane w Dzienniku zdarzeń systemu WebIssues.</para>

      <tip>
        <title>Wskazówka</title>
        <para>Skonfigurowanie wysyłania e-maili i zadania cyklicznego nie oznacza jeszcze, że będą wysyłane powiadomienia. Aby skonfigurować powiadomienia mailowe, musisz utworzyć alerty dla wybranych folderów lub globalnych list i ustawić odpowiedni typ e-maili. Upewnij się także, że w twoich ustawieniach użytkownika jest podany poprawny adres e-mail. Więcej informacji na temat używania powiadomień e-mailowych znajdziesz w sekcji <xref linkend="webissues.track.alerts" />.</para>
      </tip>

    </sect2>

  </sect1>

  <sect1 id="webissues.prep.inbox">
    <title>Skrzynka odbiorcza</title>

    <para>System WebIssues może również odbierać e-maile używając wybranego konta pocztowego i tworzyć sprawy na podstawie tych e-maili, a także tworzyć komentarze i załączniki do istniejących spraw. W połączeniu z subskrypcjami mailowymi, pozwala to skonfigurować dwustronną komunikację mailową z systemem WebIssues. Jest nawet możliwość, by zewnętrzny użytkownicy, nie posiadający konta w systemie WebIssues, komunikowali się w ten sposób z systemem, co jest bardzo użyteczne w przypadku różnego rodzaju usług wsparcia.</para>

    <para>Choć skrzynka odbiorcza może być używana bez wysyłania e-maili, w takim wypadku nie będziesz mógł skorzysać z automatycznych odpowiedzi i subskrypcji. Poza tym, jeśli wysyłanie e-maili nie jest skonfigurowane, to użytkownicy systemu WebIssues nie posiadają przypisanego adresu mailowego, a więc wszsytkie e-maile są traktowane, jakby były wysłane przez zewnętrznych użytkowników. Więcej informacji o konfigurowaniu wysyłania poczty znajdziesz w sekcji <xref linkend="webissues.prep.nofitications.email" />. Musisz równiesz upewnić się, że zadanie cykliczne jest prawidłowo skonfigurowane. Więcej informacji na ten temat znajdziesz w sekcji <xref linkend="webissues.prep.nofitications.cron" />.</para>

    <sect2 id="webissues.prep.inbox.settings">
      <title>Ustawienia skrzynki odbiorczej</title>

      <para>Jeśli chcesz, by system WebIssues odbierał wiadomości e-mail, przejdź do Panelu Administracyjnego i kliknij <guilabel>Ustawienia skrzynki odbiorczej</guilabel>.</para>

      <figure>
        <title>Ustawienia skrzynki odbiorczej</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig11.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Wybierz protokół komunikacji z serwerem poczty. Zalecane jest wybranie opcji <guilabel>Serwer IMAP</guilabel>, jeśli jest to możliwe, jednak <guilabel>Serwer POP3</guilabel> również jest wspierany. Podaj również adres e-mail skrzynki odbiorczej. W sekcji <guilabel>Serwer skrzynki odbiorczej</guilabel> podaj adres serwera poczty i numer portu. Wybierz odpowiedni tryb szyfrowania, jeśli twój serwer go obsługuje. Podaj również nazwę użytkownika i hasło używane do uwierzytelnienia połączenia. Możesz podać nazwę skrzynki pocztowej z której będą pobierane wiadomości do przetworzenia. Jeśli zostawisz to pole puste, zostanie użyta osobista skrzynka odbiorcza bieżącego użytkownika.</para>

      <note>
        <title>Notatka</title>
        <para>Choć ten sam adres e-mail może być użyty do wysyłania poczty i dla skrzynki odbiorczej, zalecane jest użycie dwóch osobnych adresów. Ograniczy to ryzyko powstawania pętli, gdy e-mail powiadomienia zostanie odbity przez serwer poczty odbiorcy, a odbita wiadomość zostanie przetworzona przez skrzynkę odbiorczą.</para>
      </note>

      <para>Zaznacz opcję <guilabel>Nie sprawdzaj certyfikatu serwera</guilabel> jeśli używasz szyfrowanego połączenia z lokalnym serwerem, który używa samopodpisanego certyfikatu. Używając serwera IMAP, możesz również zaznaczyć opcję <guilabel>Pozostaw przetworzone wiadomości na serwerze</guilabel>. Domyślnie system WebIssues automatycznie usunie przetworzone wiadomości z serwera. Po włączeniu tej opcji, wiadomości będą jedynie oznaczane jako przeczytane i zostaną pozostawione na serwerze. W takim wypadku upewnij się, że zasady przechowywania wiadomości na serwerze usuwają stare e-maile, aby uniknąć zapełnienia skrzynki odbiorczej. Ta opcja nie jest dostępna, jeśli używasz serwera POP3.</para>

      <para>Naciśnij przycisk <guibutton>Testuj połączenie</guibutton> by potwierdzić, że system WebIssues może połączyć się z podanym serwerem. Nie spowoduje to przetworzenia żadnych wiadomości, a jedynie wyświetlenie komunikatu o powodzeniu lub błędzie.</para>

      <para>Gdy do skrzynki odbiorczej systemu WebIssues jest wysłana wiadomość e-mail, zostaje ona zarejestrowana jako nowa sprawa w wybranym folderze. Temat wiadomości staje się nazwą sprawy. Wszystkie atrybuty są ustawiona na domyślne, początkowe wartości. Tekstowa treść e-maila jest automatycznie dodana jako opis sprawy, wraz z najważniejszymi nagłówkami, takimi jak adres nadawcy i odbiorców wiadomości. Jeśli e-mail posiada treść w formacie HTML, zostaje ona dodana jako załącznik, który można łatwo otworzyć i wyświetlić w przeglądarce. Wszystkie pliki załączone do e-maila są również dodawane jako załączniki sprawy.</para>

      <para>Jeśli temat e-maila zawiera identyfikator w nawiasach kwadratowych, na przykład <literal>[#123]</literal>, treść e-maila jest dodawana jako nowy komentarz do sprawy o podanym identyfikatorze. Treść w formacie HTML i załączone pliki są również dodawane jego załączniki tej sprawy. Najłatwiej dodasz komentarz do istniejącej sprawy, odpowiadając na wiadomość potwierdzającą jej utworzenie, albo na powiadomienie subskrypcji, ponieważ zawierają one już identyfikator sprawy w temacie. Pamiętaj, by zamieścić swój komentarz na początku e-maila. Treść cytowanego powiadomienia nie zostanie zamieszczone w twoim komentarzu, ponieważ jest ona automatycznie odcinana na pierwszej linii zawierającej kreski.</para>

    </sect2>

    <sect2 id="webissues.prep.inbox.external">
      <title>Zewnętrzni użytkownicy</title>

      <para>Domyślnie akceptowane są tylko wiadomości wysłane przez użytkowników systemu WebIssues. Adres nadawcy jest porównywany z adresami e-mail skonfigurowanymi w preferencjach użytkowników. E-maile wysłane z adresów, które nie mają odpowiadających użytkowników w systemie WebIssues, są ignorowane. Pamiętaj, że sprawy są tworzone i modyfikowane w imieniu użytkownika skojarzonego z adresem nadawcy, a więc użytkownik ten musi mieć dostęp do projektu i folderu zawierającego sprawę. W przeciwnym wypadku wiadomość jest ignorowana, a do Dziennika zdarzeń jest dodawane ostrzeżenie.</para>

      <para>Jeśli włączysz opcję <guilabel>Akceptuj wiadomości od zewnętrznych użytkowników</guilabel>, wiadomości wysłane z adresów nie mających odpowiadającego użytkownika w systemie WebIssues będą również akceptowane. W tym wypadku musisz również wybrać <guilabel>Konto użytkownika robota</guilabel>, w którego imieniu będą tworzone i modyfikowane takie sprawy. Konto użytkownika robota również musi mieć dostęp do projektu zawierającego sprawę, a zatem zmieniając uprawnienia tego konta użytkownika, możesz kontrolować, jakie obszary systemu mają być dostępne dla zewnętrznych użytkowników. Choć sprawa jest tworzona i modyfikowana przez użytownika robota, rzeczywisty nadawca wiadomości jest widoczny w nagłówkach na początku opisu lub komentarza.</para>

      <figure>
        <title>Zewnętrzni użytkownicy</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig12.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <tip>
        <title>Wskazówka</title>
        <para>Jeśli wiadomości od zewnętrznych użytkowników są akceptowane, serwer WebIssues w żaden sposób nie filtruje otrzymywanych wiadomości. Jeśli chcesz określić akceptowane lub blokowane adresy albo filtrować spam i inne niechciane wiadomości, powinieneś skonfigurować filtrowanie na serwerze poczty.</para>
        <para>Możesz na przykład utworzyć odrębną skrzynkę pocztową, z której serwer WebIssues będzie pobierał wiadomości, a następnie skonfigurować regułę, która przenosi jedynie wiadomości spełniające określone kryteria do tej skrzynki. Więcej informacji znajdziesz w dokumentacji swojego serwera poczty.</para>
      </tip>

    </sect2>

    <sect2 id="webissues.prep.inbox.mapping">
      <title>Mapowanie folderów</title>

      <para>W najprostszym scenariuszu, wszystkie sprawy są tworzone w jednym folderze, który możesz wybrać za pomocą opcji <guilabel>Domyślny folder</guilabel>. Możesz jednak również włączyć opcję <guilabel>Mapuj rozszerzenia adresu do projektu i folderu</guilabel>, która umożliwia określanie projektu i folderu, w którym sprawy są tworzone, na podstawie adresu, na który jest wysłana wiadomość do skrzynki odbiorczej systemu WebIssues.</para>

      <figure>
        <title>Mapowanie folderów</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig13.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Istnieją dwa sposoby skonfigurowania mapowania adresu e-mail do projektu i folderu. Po pierwsze, możesz włączyć rozszerzenia adresu na serwerze poczty. Na przykład, jeśli adres skrzynki odbiorczej to <literal>service@example.com</literal>, wiadomość wysłana na adres <literal>service+myproject-bugs@example.com</literal> zostanie zarejestrowana jako sprawa w projekcie <quote>My project</quote>, w folderze <quote>Bugs</quote>. Drugie rozwiązanie polega na skonfigurowaniu aliasu, na przykład <literal>service-myproject-bugs@example.com</literal>, dla adresu <literal>service@example.com</literal>. Więcej informacji na temat rozszerzeń adresu i alisasów znajdziesz w dokumentacji serwera poczty.</para>

      <note>
        <title>Notatka</title>
        <para>Aby mapowanie folderu działało, adres e-mail musi zawierać nazwę konta, taką samą jak w adresie skrzynki odbiorczej, następnie znak <literal>+</literal> lub <literal>-</literal>, część nazwy projektu, znak <literal>-</literal> oraz część nazwy folderu. Również nazwa domeny musi odpowiadać adresowi skrzynki odbiorczej. Adres musi jawnie występować w nagłówku Do lub DW e-maila. Odstępy i inne znaki nie będące literami lub cyframi, występujące w nazwie projektu i folderu, są ignorowane przy porównywaniu. Tylko część nazwy projektu i folderu musi pasować, ale mapowanie musi być jednoznaczne.</para>
        <para>Na przykład, jeśli projekt ma nazwę <quote>My first project</quote>, zarówno <literal>service+first-bugs@example.com</literal>, jak i <literal>service+firstproject-bugs@example.com</literal> będą pasować. Jeśli jednak więcej niż jeden projekt zawiera słowo <quote>first</quote> w nazwie, pierwszy przykład nie zostanie pomyślnie zmapowany, ponieważ będzie niejednoznaczny.</para>
        <para>Zwróć uwagę na polskie litery i inne akcentowane i niełacińskie litery występujące w nazwach projektów i folderów, ponieważ nie wszystkie serwery poczty obsługują adresy e-mail zawierające takie znaki. W takim wypadku możesz dodać słowa zawierające tylko łacińskie znaki do nazw projektów i folderów, aby mogły one być użyte do mapowania adresów e-mail.</para>
      </note>

      <para>Jeśli folder nie może zostać automatycznie określony na podstawie adresu e-mail, sprawa jest tworzona w wybranym domyślnym folderze. Jednak gdy opcja mapowania folderów jest aktywna, możesz nie podawać żadnego domyślnego folderu. W tym wypadku każdy e-mail, który nie może zostać zmapowany, zostanie zignorowany, a do Dziennika zdarzeń zostanie dodane ostrzeżenie. Pamiętaj również, że rzeczywisty użytkownik lub użytkownik robot musi mieć dostęp do danego folderu, niezależnie od tego, czy jest to folder zmapowany, czy domyślny.</para>

    </sect2>

    <sect2 id="webissues.prep.inbox.sending">
      <title>Odpowiedzi i subskrypcje</title>

      <para>Jeśli włączysz opcję <guilabel>Wysyłaj odpowiedź gdy sprawa jest utworzona</guilabel>, wiadomość z potwiedzeniem jest wysyłana do nadawcy, jeśli została utworzona nowa sprawa przez skrzynkę odbiorczą. Automatyczna odpowiedź zawiera identyfikator i nazwę sprawy. Odpowiadając na tą wiadomość, można utworzyć dodatkowe komentarze i załączniki, na przykład aby dostarczyć więcej informacji lub zapytać o status sprawy.</para>

      <para>Jeśli włączysz opcję <guilabel>Subskrybuj nadawcę do utworzonych spraw</guilabel>, nadawca wiadomości automatycznie subskrybuje sprawę utworzoną przez skrzynkę odbiorczą. W tym wypadku wszystkie zmiany dokonane przez innych użytkowników, w tym edycja atrybutów, zmiany opisu oraz dodawanie komentarzy i załączników, są automatycznie wysyłane jako powiadomienia mailowe. Przeczytaj sekcję <xref linkend="webissues.track.subscriptions" /> aby uzyskać więcej informacji.</para>

      <figure>
        <title>Wysyłanie e-maili</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/ch02-fig14.png" format="PNG"/></imageobject>
        </mediaobject>
      </figure>

      <para>Odpowiadając na powiadomienie subskrypcji, jeśli skrzynka odbiorcza jest włączona, możesz dodawać komentarze i załączniki do sprawy. W ten sposób możesz śledzić stan spraw i dodawać komentarze używając tylko poczty, bez konieczności logowania się do systemu WebIssues.</para>

      <para>Automatyczne subskrypcje działają również dla zewnętrznych użytkowników. Umożliwia to osobom nie posiadającym konta w systemie WebIssues otrzymywać powiadomienia i odpowiadać na sprawy, które utworzyli. W typowym scenariuszu systemu wsparcia, kiedy ktoś wysyła wiadomość do skrzynki odbiorczej, tworzona jest sprawa, a nadawca automatycznie ją subskrybuje. Gdy osoba udzielająca wsparcia zmienia sprawę lub dodaje komentarz za pośrednictwem systemu WebIssues, powiadomienie subskrypcji jest automatycznie wysyłane do twórcy sprawy. Może on wtedy odpowiedzieć na powiadomienie, aby dostarczyć więcej informacji. W ten sposób zewnętrzni użytkownicy mogą komunikować się z systemem WebIssues przy pomocy e-maili, a cała komunikacja zostaje zapisana w historii sprawy.</para>

      <para>Możesz również włączyć dostęp anonimowy, aby umożliwić zewnętrznym użytkownikom przeglądanie wszystkich spraw z publicznych projektów za pomocą programu Web Client, bez konieczności logowania się. Pamiętaj jednak, że w tym wypadku wszyscy będą mieli dostęp do wszystkich spraw, nie tylko do tych, które sami utworzyli. Więcej informacji o konfigurowaniu dostępu anonimowego znajdziesz w sekcji <xref linkend="webissues.custom.settings"/>.</para>

      <para>Pamiętaj, że nadawca wiadmości nie subskrybuje istniejących spraw przy dodawaniu komentarza. W tym wypadku nie jest również wysyłana automatyczna odpowiedź. Pozostali odbiorcy wiadomości nie subskrybują automatycznie dodanej sprawy.</para>

    </sect2>

  </sect1>

</chapter>
